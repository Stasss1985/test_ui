{"uid":"3921b4311af7578d","name":"test_create_old_lead_silver_cash_contract","fullName":"tests.test_add_lead_contract#test_create_old_lead_silver_cash_contract","historyId":"d6d1b12237757341d4149a66e801a293","time":{"start":1747748956230,"stop":1747749082394,"duration":126164},"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x000001C66F4DB190>\nproduct_page = <pages.lead_page.product_page.ProductPage object at 0x000001C66F4DB710>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001C66F4DA610>\n\n    @pytest.mark.smoke('smoke test')\n    def test_create_old_lead_silver_cash_contract(open_crm_as_admin, lead_page, product_page, contract_create_page):\n        # Смена офиса\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot()\n        # Переход к созданию лида\n        lead_page.navigate_to_lead_create()\n        lead_page.take_screenshot()\n        # Выбор клиента из базы\n        lead_page.chose_old_client_to_lead()\n        lead_page.take_screenshot()\n        # Добавление продукта\n        product_page.add_product_silver()\n        product_page.take_screenshot()\n        # Выбор тарифа\n        contract_create_page.contract_tariff_chose_1()\n        contract_create_page.take_screenshot()\n        # Создание договора\n        contract_create_page.create_operation_create_contract()\n        contract_create_page.take_screenshot()\n        # Печать документа\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot()\n        # Печать чека создания \"догов потребит займа\"\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot()\n        # Проверка статуса создания сделки (печати чека)\n>       contract_create_page.compare_text_status()\n\ntests\\test_add_lead_contract.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\lead_page\\contract_сreate_page.py:135: in compare_text_status\n    self.compare_text(self.loc.STATUS_PRINT_DOC_CHECK, \"Завершено\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001C66F4DA610>\nlocator = ('css selector', 'div.content-page li:nth-child(3) div.w-100 div'), expected_text = 'Завершено'\n\n    @allure.step(\"Сравнение текста элемента с ожидаемым текстом\")\n    def compare_text(self, locator, expected_text):\n        try:\n            # Ожидание появления элемента и получение его текста\n            actual_text = WebDriverWait(self.driver, 30).until(EC.visibility_of_element_located(locator)).text\n    \n>           assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\nE           AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n\npages\\base_page.py:239: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":8,"retriesStatusChange":true,"beforeStages":[{"name":"driver","time":{"start":1747748931134,"stop":1747748943061,"duration":11927},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"login_page","time":{"start":1747748943062,"stop":1747748943159,"duration":97},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"open_crm_as_admin","time":{"start":1747748943159,"stop":1747748955794,"duration":12635},"status":"passed","steps":[{"name":"enter correct login and password","time":{"start":1747748947572,"stop":1747748954542,"duration":6970},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Check correct url","time":{"start":1747748954542,"stop":1747748954548,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"525254a2c5df8c5a","name":"screenshot","source":"525254a2c5df8c5a.png","type":"image/png","size":365639}],"parameters":[],"stepsCount":2,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"lead_page","time":{"start":1747748955794,"stop":1747748955906,"duration":112},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"product_page","time":{"start":1747748955906,"stop":1747748956107,"duration":201},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"contract_create_page","time":{"start":1747748956107,"stop":1747748956230,"duration":123},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x000001C66F4DB190>\nproduct_page = <pages.lead_page.product_page.ProductPage object at 0x000001C66F4DB710>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001C66F4DA610>\n\n    @pytest.mark.smoke('smoke test')\n    def test_create_old_lead_silver_cash_contract(open_crm_as_admin, lead_page, product_page, contract_create_page):\n        # Смена офиса\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot()\n        # Переход к созданию лида\n        lead_page.navigate_to_lead_create()\n        lead_page.take_screenshot()\n        # Выбор клиента из базы\n        lead_page.chose_old_client_to_lead()\n        lead_page.take_screenshot()\n        # Добавление продукта\n        product_page.add_product_silver()\n        product_page.take_screenshot()\n        # Выбор тарифа\n        contract_create_page.contract_tariff_chose_1()\n        contract_create_page.take_screenshot()\n        # Создание договора\n        contract_create_page.create_operation_create_contract()\n        contract_create_page.take_screenshot()\n        # Печать документа\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot()\n        # Печать чека создания \"догов потребит займа\"\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot()\n        # Проверка статуса создания сделки (печати чека)\n>       contract_create_page.compare_text_status()\n\ntests\\test_add_lead_contract.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\lead_page\\contract_сreate_page.py:135: in compare_text_status\n    self.compare_text(self.loc.STATUS_PRINT_DOC_CHECK, \"Завершено\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001C66F4DA610>\nlocator = ('css selector', 'div.content-page li:nth-child(3) div.w-100 div'), expected_text = 'Завершено'\n\n    @allure.step(\"Сравнение текста элемента с ожидаемым текстом\")\n    def compare_text(self, locator, expected_text):\n        try:\n            # Ожидание появления элемента и получение его текста\n            actual_text = WebDriverWait(self.driver, 30).until(EC.visibility_of_element_located(locator)).text\n    \n>           assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\nE           AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n\npages\\base_page.py:239: AssertionError","steps":[{"name":"Сравнение текста элемента с ожидаемым текстом","time":{"start":1747749081453,"stop":1747749082392,"duration":939},"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n","statusTrace":"  File \"C:\\Users\\Stass\\PycharmProjects\\PycharmProjects\\tests_ui_karman\\venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\Stass\\karman_test\\pages\\base_page.py\", line 239, in compare_text\n    assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\n","steps":[],"attachments":[{"uid":"8e6e25b2791c9b5b","name":"compare_text_mismatch_('css selector', 'div.content-page li:nth-child(3) div.w-100 div')","source":"8e6e25b2791c9b5b.png","type":"image/png","size":127938},{"uid":"3a3b998d813c45d4","name":"Сравнение текста","source":"3a3b998d813c45d4.txt","type":"text/plain","size":114}],"parameters":[{"name":"locator","value":"('css selector', 'div.content-page li:nth-child(3) div.w-100 div')"},{"name":"expected_text","value":"'Завершено'"}],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":2}],"attachments":[{"uid":"9ae8ede6f5c29d0e","name":"screenshot","source":"9ae8ede6f5c29d0e.png","type":"image/png","size":366694},{"uid":"6a672624e68458b5","name":"screenshot","source":"6a672624e68458b5.png","type":"image/png","size":171748},{"uid":"626a19a66e3944f1","name":"screenshot","source":"626a19a66e3944f1.png","type":"image/png","size":246025},{"uid":"c88d3aa94d64335a","name":"screenshot","source":"c88d3aa94d64335a.png","type":"image/png","size":261911},{"uid":"9a72f833309f62c4","name":"screenshot","source":"9a72f833309f62c4.png","type":"image/png","size":287352},{"uid":"62b1c0c92f50df07","name":"screenshot","source":"62b1c0c92f50df07.png","type":"image/png","size":131148},{"uid":"424f9aa5858deb54","name":"screenshot","source":"424f9aa5858deb54.png","type":"image/png","size":129917},{"uid":"d400fdeb1b2d6316","name":"screenshot","source":"d400fdeb1b2d6316.png","type":"image/png","size":135814},{"uid":"f1f8a587dac965ab","name":"log","source":"f1f8a587dac965ab.txt","type":"text/plain","size":861}],"parameters":[],"stepsCount":1,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":11},"afterStages":[{"name":"driver::0","time":{"start":1747749082423,"stop":1747749085607,"duration":3184},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"tag","value":"smoke('smoke test')"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_add_lead_contract"},{"name":"host","value":"LAPTOP-R624DMFA"},{"name":"thread","value":"9156-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_add_lead_contract"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"2738aea84b9418f7","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'click'","time":{"start":1747746205572,"stop":1747746316699,"duration":111127}},{"uid":"a11c38552e8eee6c","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'send_keys'","time":{"start":1747561862933,"stop":1747561862933,"duration":0}},{"uid":"b9c30c8783193f21","status":"passed","time":{"start":1747554330040,"stop":1747554472390,"duration":142350}},{"uid":"d371d0fbe941ea57","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'click'","time":{"start":1747548547394,"stop":1747548664548,"duration":117154}},{"uid":"fb25f75648bdc8cd","status":"broken","statusDetails":"selenium.common.exceptions.WebDriverException: Message: unknown error: net::ERR_CONNECTION_TIMED_OUT\n  (Session info: chrome=136.0.7103.93)\nStacktrace:\n\tGetHandleVerifier [0x0128FC83+61635]\n\tGetHandleVerifier [0x0128FCC4+61700]\n\t(No symbol) [0x010B05D3]\n\t(No symbol) [0x010ADBE0]\n\t(No symbol) [0x010A13A8]\n\t(No symbol) [0x010A2CF0]\n\t(No symbol) [0x010A1638]\n\t(No symbol) [0x010A1193]\n\t(No symbol) [0x010A0EA1]\n\t(No symbol) [0x0109EE80]\n\t(No symbol) [0x0109F81B]\n\t(No symbol) [0x010B3FFE]\n\t(No symbol) [0x0113F217]\n\t(No symbol) [0x0111D29C]\n\t(No symbol) [0x0113E61B]\n\t(No symbol) [0x0111D096]\n\t(No symbol) [0x010EC840]\n\t(No symbol) [0x010ED6A4]\n\tGetHandleVerifier [0x015145A3+2701795]\n\tGetHandleVerifier [0x0150FD26+2683238]\n\tGetHandleVerifier [0x0152AA6E+2793134]\n\tGetHandleVerifier [0x012A6945+155013]\n\tGetHandleVerifier [0x012AD02D+181357]\n\tGetHandleVerifier [0x012974D8+92440]\n\tGetHandleVerifier [0x01297680+92864]\n\tGetHandleVerifier [0x01282070+5296]\n\tBaseThreadInitThunk [0x767B5D49+25]\n\tRtlInitializeExceptionChain [0x777BD03B+107]\n\tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]","time":{"start":1747310315754,"stop":1747310315754,"duration":0}},{"uid":"8067e6f504b5319e","status":"broken","statusDetails":"selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element <a href=\"/lead\" class=\"side-nav-link d-flex align-items-center\">...</a> is not clickable at point (130, 133). Other element would receive the click: <div class=\"p-dialog-mask p-component-overlay p-component-overlay-enter\" style=\"z-index: 1102;\">...</div>\n  (Session info: chrome=136.0.7103.93)\nStacktrace:\n\tGetHandleVerifier [0x0128FC83+61635]\n\tGetHandleVerifier [0x0128FCC4+61700]\n\t(No symbol) [0x010B05D3]\n\t(No symbol) [0x010FECB0]\n\t(No symbol) [0x010FD054]\n\t(No symbol) [0x010FABF7]\n\t(No symbol) [0x010F9EFB]\n\t(No symbol) [0x010EE5A5]\n\t(No symbol) [0x0111D29C]\n\t(No symbol) [0x010EE034]\n\t(No symbol) [0x0111D514]\n\t(No symbol) [0x0113E61B]\n\t(No symbol) [0x0111D096]\n\t(No symbol) [0x010EC840]\n\t(No symbol) [0x010ED6A4]\n\tGetHandleVerifier [0x015145A3+2701795]\n\tGetHandleVerifier [0x0150FD26+2683238]\n\tGetHandleVerifier [0x0152AA6E+2793134]\n\tGetHandleVerifier [0x012A6945+155013]\n\tGetHandleVerifier [0x012AD02D+181357]\n\tGetHandleVerifier [0x012974D8+92440]\n\tGetHandleVerifier [0x01297680+92864]\n\tGetHandleVerifier [0x01282070+5296]\n\tBaseThreadInitThunk [0x767B5D49+25]\n\tRtlInitializeExceptionChain [0x777BD03B+107]\n\tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]","time":{"start":1747307632949,"stop":1747307641589,"duration":8640}},{"uid":"16d10fd697f5b11c","status":"passed","time":{"start":1747295507577,"stop":1747295621823,"duration":114246}},{"uid":"cfe3228a08749707","status":"broken","statusDetails":"_pytest.fixtures.FixtureLookupError: ('contract_сreate_page', <FixtureRequest for <Function test_create_old_lead_silver_cash_contract>>)","time":{"start":1747291992970,"stop":1747291992970,"duration":0}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke('smoke test')"]},"source":"3921b4311af7578d.json","parameterValues":[]}