{"uid":"826da7d213ed5687","name":"test_01_sale_in_shop_product","fullName":"tests.test_1_sale_in_shop.test_1_sale_in_shop#test_01_sale_in_shop_product","historyId":"61c570a5c80e9195a1325ae1db2218fc","time":{"start":1747553971298,"stop":1747554145314,"duration":174016},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n\tGetHandleVerifier [0x005CFC83+61635]\n\tGetHandleVerifier [0x005CFCC4+61700]\n\t(No symbol) [0x003F05D3]\n\t(No symbol) [0x0043899E]\n\t(No symbol) [0x00438D3B]\n\t(No symbol) [0x00480E12]\n\t(No symbol) [0x0045D2E4]\n\t(No symbol) [0x0047E61B]\n\t(No symbol) [0x0045D096]\n\t(No symbol) [0x0042C840]\n\t(No symbol) [0x0042D6A4]\n\tGetHandleVerifier [0x008545A3+2701795]\n\tGetHandleVerifier [0x0084FD26+2683238]\n\tGetHandleVerifier [0x0086AA6E+2793134]\n\tGetHandleVerifier [0x005E6945+155013]\n\tGetHandleVerifier [0x005ED02D+181357]\n\tGetHandleVerifier [0x005D74D8+92440]\n\tGetHandleVerifier [0x005D7680+92864]\n\tGetHandleVerifier [0x005C2070+5296]\n\tBaseThreadInitThunk [0x767B5D49+25]\n\tRtlInitializeExceptionChain [0x777BD03B+107]\n\tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x000001B52B44F950>\nshop_sale_page = <pages.shop_page.shop_sale_page.ShopSalePage object at 0x000001B52B44C490>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001B52B4BFE50>\n\n    @pytest.mark.smoke('smoke test')\n    def test_01_sale_in_shop_product(open_crm_as_admin, lead_page, shop_sale_page, contract_create_page):\n        logging.info('Старт проверки \"Продажа техники из магазина за наличку\"')\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot(\"change_office\")\n    \n        logging.info('Переход в магазин')\n        shop_sale_page.navigate_to_shop_page()\n        shop_sale_page.take_screenshot(\"navigated_to_shop\")\n    \n        logging.info('Открытие фильтра справа и сортировка для продажи товаров (не ЮИ)')\n        shop_sale_page.filter_for_sale_product_in_shop()\n        shop_sale_page.take_screenshot(\"filter_for_sale_product_in_shop\")\n    \n        logging.info('Продажа товара из магазина (не ЮИ)')\n        shop_sale_page.sale_product_in_shop()\n        shop_sale_page.take_screenshot(\"sale_product_in_shop\")\n    \n        logging.info('Печать документа')\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot(\"document_printed\")\n    \n        logging.info('Печать чека создания \"догов потребит займа\"')\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot(\"check_printed\")\n    \n        logging.info('Проверка статуса продажи товара (печати чека)')\n        contract_create_page.compare_text_status()\n        contract_create_page.take_screenshot(\"status_checked\")\n    \n        logging.info('Переход в карточку товара из печати чека')\n        shop_sale_page.xref_go_to_product_id()\n        shop_sale_page.take_screenshot(\"product_card_accessed\")\n    \n        logging.info('Проверка статуса \"Нет в наличии\" в карточке товара')\n>       shop_sale_page.compare_product_status_out_of_stock()\n\ntests\\test_1_sale_in_shop\\test_1_sale_in_shop.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\shop_page\\shop_sale_page.py:123: in compare_product_status_out_of_stock\n    actual_text = self.get_text(self.loc.PRODUCT_STATUS_IN_PRODUCT_ID)\npages\\base_page.py:62: in get_text\n    return self.wait.until(EC.visibility_of_element_located(locator)).text\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"d182c677b4d8aa9a1122616b842b2b8d\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x000001B52B43D260>, message = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Wait until the method returns a value that is not False.\n    \n        Calls the method provided with the driver as an argument until the\n        return value does not evaluate to ``False``.\n    \n        Parameters:\n        ----------\n        method: callable(WebDriver)\n            - A callable object that takes a WebDriver instance as an argument.\n    \n        message: str\n            - Optional message for :exc:`TimeoutException`\n    \n        Return:\n        -------\n        object: T\n            - The result of the last call to `method`\n    \n        Raises:\n        -------\n        TimeoutException\n            - If 'method' does not return a truthy value within the WebDriverWait\n            object's timeout\n    \n        Example:\n        --------\n        >>> from selenium.webdriver.common.by import By\n        >>> from selenium.webdriver.support.ui import WebDriverWait\n        >>> from selenium.webdriver.support import expected_conditions as EC\n    \n        # Wait until an element is visible on the page\n        >>> wait = WebDriverWait(driver, 10)\n        >>> element = wait.until(EC.visibility_of_element_located((By.ID, \"exampleId\")))\n        >>> print(element.text)\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       \tGetHandleVerifier [0x005CFC83+61635]\nE       \tGetHandleVerifier [0x005CFCC4+61700]\nE       \t(No symbol) [0x003F05D3]\nE       \t(No symbol) [0x0043899E]\nE       \t(No symbol) [0x00438D3B]\nE       \t(No symbol) [0x00480E12]\nE       \t(No symbol) [0x0045D2E4]\nE       \t(No symbol) [0x0047E61B]\nE       \t(No symbol) [0x0045D096]\nE       \t(No symbol) [0x0042C840]\nE       \t(No symbol) [0x0042D6A4]\nE       \tGetHandleVerifier [0x008545A3+2701795]\nE       \tGetHandleVerifier [0x0084FD26+2683238]\nE       \tGetHandleVerifier [0x0086AA6E+2793134]\nE       \tGetHandleVerifier [0x005E6945+155013]\nE       \tGetHandleVerifier [0x005ED02D+181357]\nE       \tGetHandleVerifier [0x005D74D8+92440]\nE       \tGetHandleVerifier [0x005D7680+92864]\nE       \tGetHandleVerifier [0x005C2070+5296]\nE       \tBaseThreadInitThunk [0x767B5D49+25]\nE       \tRtlInitializeExceptionChain [0x777BD03B+107]\nE       \tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]\n\n..\\PycharmProjects\\PycharmProjects\\tests_ui_karman\\venv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py:146: TimeoutException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1747553931567,"stop":1747553931569,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"play_sound_after_tests","time":{"start":1747553931569,"stop":1747553931569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"driver","time":{"start":1747553931569,"stop":1747553936677,"duration":5108},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"login_page","time":{"start":1747553936677,"stop":1747553936761,"duration":84},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"open_crm_as_admin","time":{"start":1747553936761,"stop":1747553971246,"duration":34485},"status":"passed","steps":[{"name":"enter correct login and password","time":{"start":1747553951545,"stop":1747553969460,"duration":17915},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Check correct url","time":{"start":1747553969460,"stop":1747553969488,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"9750d1577f10cf99","name":"screenshot","source":"9750d1577f10cf99.png","type":"image/png","size":370054}],"parameters":[],"stepsCount":2,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"lead_page","time":{"start":1747553971247,"stop":1747553971260,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"shop_sale_page","time":{"start":1747553971260,"stop":1747553971276,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"contract_create_page","time":{"start":1747553971276,"stop":1747553971298,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n\tGetHandleVerifier [0x005CFC83+61635]\n\tGetHandleVerifier [0x005CFCC4+61700]\n\t(No symbol) [0x003F05D3]\n\t(No symbol) [0x0043899E]\n\t(No symbol) [0x00438D3B]\n\t(No symbol) [0x00480E12]\n\t(No symbol) [0x0045D2E4]\n\t(No symbol) [0x0047E61B]\n\t(No symbol) [0x0045D096]\n\t(No symbol) [0x0042C840]\n\t(No symbol) [0x0042D6A4]\n\tGetHandleVerifier [0x008545A3+2701795]\n\tGetHandleVerifier [0x0084FD26+2683238]\n\tGetHandleVerifier [0x0086AA6E+2793134]\n\tGetHandleVerifier [0x005E6945+155013]\n\tGetHandleVerifier [0x005ED02D+181357]\n\tGetHandleVerifier [0x005D74D8+92440]\n\tGetHandleVerifier [0x005D7680+92864]\n\tGetHandleVerifier [0x005C2070+5296]\n\tBaseThreadInitThunk [0x767B5D49+25]\n\tRtlInitializeExceptionChain [0x777BD03B+107]\n\tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x000001B52B44F950>\nshop_sale_page = <pages.shop_page.shop_sale_page.ShopSalePage object at 0x000001B52B44C490>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x000001B52B4BFE50>\n\n    @pytest.mark.smoke('smoke test')\n    def test_01_sale_in_shop_product(open_crm_as_admin, lead_page, shop_sale_page, contract_create_page):\n        logging.info('Старт проверки \"Продажа техники из магазина за наличку\"')\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot(\"change_office\")\n    \n        logging.info('Переход в магазин')\n        shop_sale_page.navigate_to_shop_page()\n        shop_sale_page.take_screenshot(\"navigated_to_shop\")\n    \n        logging.info('Открытие фильтра справа и сортировка для продажи товаров (не ЮИ)')\n        shop_sale_page.filter_for_sale_product_in_shop()\n        shop_sale_page.take_screenshot(\"filter_for_sale_product_in_shop\")\n    \n        logging.info('Продажа товара из магазина (не ЮИ)')\n        shop_sale_page.sale_product_in_shop()\n        shop_sale_page.take_screenshot(\"sale_product_in_shop\")\n    \n        logging.info('Печать документа')\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot(\"document_printed\")\n    \n        logging.info('Печать чека создания \"догов потребит займа\"')\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot(\"check_printed\")\n    \n        logging.info('Проверка статуса продажи товара (печати чека)')\n        contract_create_page.compare_text_status()\n        contract_create_page.take_screenshot(\"status_checked\")\n    \n        logging.info('Переход в карточку товара из печати чека')\n        shop_sale_page.xref_go_to_product_id()\n        shop_sale_page.take_screenshot(\"product_card_accessed\")\n    \n        logging.info('Проверка статуса \"Нет в наличии\" в карточке товара')\n>       shop_sale_page.compare_product_status_out_of_stock()\n\ntests\\test_1_sale_in_shop\\test_1_sale_in_shop.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\shop_page\\shop_sale_page.py:123: in compare_product_status_out_of_stock\n    actual_text = self.get_text(self.loc.PRODUCT_STATUS_IN_PRODUCT_ID)\npages\\base_page.py:62: in get_text\n    return self.wait.until(EC.visibility_of_element_located(locator)).text\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"d182c677b4d8aa9a1122616b842b2b8d\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x000001B52B43D260>, message = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Wait until the method returns a value that is not False.\n    \n        Calls the method provided with the driver as an argument until the\n        return value does not evaluate to ``False``.\n    \n        Parameters:\n        ----------\n        method: callable(WebDriver)\n            - A callable object that takes a WebDriver instance as an argument.\n    \n        message: str\n            - Optional message for :exc:`TimeoutException`\n    \n        Return:\n        -------\n        object: T\n            - The result of the last call to `method`\n    \n        Raises:\n        -------\n        TimeoutException\n            - If 'method' does not return a truthy value within the WebDriverWait\n            object's timeout\n    \n        Example:\n        --------\n        >>> from selenium.webdriver.common.by import By\n        >>> from selenium.webdriver.support.ui import WebDriverWait\n        >>> from selenium.webdriver.support import expected_conditions as EC\n    \n        # Wait until an element is visible on the page\n        >>> wait = WebDriverWait(driver, 10)\n        >>> element = wait.until(EC.visibility_of_element_located((By.ID, \"exampleId\")))\n        >>> print(element.text)\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       \tGetHandleVerifier [0x005CFC83+61635]\nE       \tGetHandleVerifier [0x005CFCC4+61700]\nE       \t(No symbol) [0x003F05D3]\nE       \t(No symbol) [0x0043899E]\nE       \t(No symbol) [0x00438D3B]\nE       \t(No symbol) [0x00480E12]\nE       \t(No symbol) [0x0045D2E4]\nE       \t(No symbol) [0x0047E61B]\nE       \t(No symbol) [0x0045D096]\nE       \t(No symbol) [0x0042C840]\nE       \t(No symbol) [0x0042D6A4]\nE       \tGetHandleVerifier [0x008545A3+2701795]\nE       \tGetHandleVerifier [0x0084FD26+2683238]\nE       \tGetHandleVerifier [0x0086AA6E+2793134]\nE       \tGetHandleVerifier [0x005E6945+155013]\nE       \tGetHandleVerifier [0x005ED02D+181357]\nE       \tGetHandleVerifier [0x005D74D8+92440]\nE       \tGetHandleVerifier [0x005D7680+92864]\nE       \tGetHandleVerifier [0x005C2070+5296]\nE       \tBaseThreadInitThunk [0x767B5D49+25]\nE       \tRtlInitializeExceptionChain [0x777BD03B+107]\nE       \tRtlGetAppContainerNamedObjectPath [0x777BCFC1+561]\n\n..\\PycharmProjects\\PycharmProjects\\tests_ui_karman\\venv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py:146: TimeoutException","steps":[{"name":"Сравнение текста элемента с ожидаемым текстом","time":{"start":1747554103613,"stop":1747554103685,"duration":72},"status":"passed","steps":[],"attachments":[{"uid":"e97fc0667f72f160","name":"Сравнение текста","source":"e97fc0667f72f160.txt","type":"text/plain","size":103}],"parameters":[{"name":"locator","value":"('css selector', 'div.content-page li:nth-child(3) div.w-100 div')"},{"name":"expected_text","value":"'Завершено'"}],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1}],"attachments":[{"uid":"95cac59335037156","name":"change_office","source":"95cac59335037156.png","type":"image/png","size":331771},{"uid":"3414ff4f16324b95","name":"navigated_to_shop","source":"3414ff4f16324b95.png","type":"image/png","size":366452},{"uid":"730c81d7a0d2f0d9","name":"filter_for_sale_product_in_shop","source":"730c81d7a0d2f0d9.png","type":"image/png","size":281922},{"uid":"cabf7857fbd0444f","name":"sale_product_in_shop","source":"cabf7857fbd0444f.png","type":"image/png","size":132368},{"uid":"19e94528d64a7b20","name":"document_printed","source":"19e94528d64a7b20.png","type":"image/png","size":131147},{"uid":"dfb8c21c30e2d55e","name":"check_printed","source":"dfb8c21c30e2d55e.png","type":"image/png","size":132090},{"uid":"dee8310b59e7b7a1","name":"screenshot","source":"dee8310b59e7b7a1.png","type":"image/png","size":129190},{"uid":"34f450ce5e23d51e","name":"status_checked","source":"34f450ce5e23d51e.png","type":"image/png","size":129190},{"uid":"fb714fbbc44c2cd2","name":"product_card_accessed","source":"fb714fbbc44c2cd2.png","type":"image/png","size":129388},{"uid":"d95833c3f2bda06b","name":"log","source":"d95833c3f2bda06b.txt","type":"text/plain","size":1674}],"parameters":[],"stepsCount":1,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":11},"afterStages":[{"name":"driver::0","time":{"start":1747554145806,"stop":1747554148976,"duration":3170},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"play_sound_after_tests::0","time":{"start":1747556419821,"stop":1747556422866,"duration":3045},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"tag","value":"smoke('smoke test')"},{"name":"parentSuite","value":"tests.test_1_sale_in_shop"},{"name":"suite","value":"test_1_sale_in_shop"},{"name":"host","value":"LAPTOP-R624DMFA"},{"name":"thread","value":"19132-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_1_sale_in_shop.test_1_sale_in_shop"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["smoke('smoke test')"]},"source":"826da7d213ed5687.json","parameterValues":[]}