{"uid":"3d8566926fd67916","name":"test_create_old_lead_laptop_cash_contract_buy_back","fullName":"tests.test_add_lead_contract_buy_back#test_create_old_lead_laptop_cash_contract_buy_back","historyId":"82d415508bba1e4210f3c9a1370ace8e","time":{"start":1747746700487,"stop":1747746813517,"duration":113030},"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x0000020FF9EB4E50>\nproduct_page = <pages.lead_page.product_page.ProductPage object at 0x0000020FF9EB5210>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x0000020FF9EB7990>\ndo_operation_with_contract_page = <pages.contract_page.do_operation_with_contract_page.DoOperationContractPage object at 0x0000020FF9EB6450>\n\n    @pytest.mark.smoke('smoke test')\n    def test_create_old_lead_laptop_cash_contract_buy_back(open_crm_as_admin, lead_page, product_page, contract_create_page,\n                                                           do_operation_with_contract_page):\n        # Смена офиса\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot()\n        # Переход к созданию лида\n        lead_page.navigate_to_lead_create()\n        lead_page.take_screenshot()\n        # Выбор клиента из базы\n        lead_page.chose_old_client_to_lead()\n        lead_page.take_screenshot()\n        # Добавление продукта\n        product_page.add_product_laptop()\n        product_page.take_screenshot()\n        # Выбор тарифа\n        contract_create_page.contract_tariff_chose_2()\n        contract_create_page.take_screenshot()\n        # Создание договора\n        contract_create_page.create_operation_create_contract()\n        contract_create_page.take_screenshot()\n        # Печать документа\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot()\n        # Печать чека создания \"догов потребит займа\"\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot()\n        # Проверка статуса создания сделки (печати чека)\n>       contract_create_page.compare_text_status()\n\ntests\\test_add_lead_contract_buy_back.py:106: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\lead_page\\contract_сreate_page.py:135: in compare_text_status\n    self.compare_text(self.loc.STATUS_PRINT_DOC_CHECK, \"Завершено\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x0000020FF9EB7990>\nlocator = ('css selector', 'div.content-page li:nth-child(3) div.w-100 div'), expected_text = 'Завершено'\n\n    @allure.step(\"Сравнение текста элемента с ожидаемым текстом\")\n    def compare_text(self, locator, expected_text):\n        try:\n            # Ожидание появления элемента и получение его текста\n            actual_text = WebDriverWait(self.driver, 30).until(EC.visibility_of_element_located(locator)).text\n    \n>           assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\nE           AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n\npages\\base_page.py:208: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":7,"retriesStatusChange":true,"beforeStages":[{"name":"_session_faker","time":{"start":1747745885823,"stop":1747745885825,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"play_sound_after_tests","time":{"start":1747745885825,"stop":1747745885825,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"driver","time":{"start":1747746672772,"stop":1747746681063,"duration":8291},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"login_page","time":{"start":1747746681063,"stop":1747746681124,"duration":61},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"open_crm_as_admin","time":{"start":1747746681124,"stop":1747746700470,"duration":19346},"status":"passed","steps":[{"name":"enter correct login and password","time":{"start":1747746690168,"stop":1747746698851,"duration":8683},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Check correct url","time":{"start":1747746698851,"stop":1747746698858,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"4353874f85a5cc01","name":"screenshot","source":"4353874f85a5cc01.png","type":"image/png","size":365379}],"parameters":[],"stepsCount":2,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"lead_page","time":{"start":1747746700470,"stop":1747746700473,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"product_page","time":{"start":1747746700473,"stop":1747746700477,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"contract_create_page","time":{"start":1747746700477,"stop":1747746700481,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"do_operation_with_contract_page","time":{"start":1747746700481,"stop":1747746700486,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека","statusTrace":"open_crm_as_admin = None, lead_page = <pages.lead_page.lead_page.LeadPage object at 0x0000020FF9EB4E50>\nproduct_page = <pages.lead_page.product_page.ProductPage object at 0x0000020FF9EB5210>\ncontract_create_page = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x0000020FF9EB7990>\ndo_operation_with_contract_page = <pages.contract_page.do_operation_with_contract_page.DoOperationContractPage object at 0x0000020FF9EB6450>\n\n    @pytest.mark.smoke('smoke test')\n    def test_create_old_lead_laptop_cash_contract_buy_back(open_crm_as_admin, lead_page, product_page, contract_create_page,\n                                                           do_operation_with_contract_page):\n        # Смена офиса\n        lead_page.change_office_1_maya()\n        lead_page.take_screenshot()\n        # Переход к созданию лида\n        lead_page.navigate_to_lead_create()\n        lead_page.take_screenshot()\n        # Выбор клиента из базы\n        lead_page.chose_old_client_to_lead()\n        lead_page.take_screenshot()\n        # Добавление продукта\n        product_page.add_product_laptop()\n        product_page.take_screenshot()\n        # Выбор тарифа\n        contract_create_page.contract_tariff_chose_2()\n        contract_create_page.take_screenshot()\n        # Создание договора\n        contract_create_page.create_operation_create_contract()\n        contract_create_page.take_screenshot()\n        # Печать документа\n        contract_create_page.print_document()\n        contract_create_page.take_screenshot()\n        # Печать чека создания \"догов потребит займа\"\n        contract_create_page.print_check()\n        contract_create_page.take_screenshot()\n        # Проверка статуса создания сделки (печати чека)\n>       contract_create_page.compare_text_status()\n\ntests\\test_add_lead_contract_buy_back.py:106: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\lead_page\\contract_сreate_page.py:135: in compare_text_status\n    self.compare_text(self.loc.STATUS_PRINT_DOC_CHECK, \"Завершено\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.lead_page.contract_сreate_page.ContractCreatePage object at 0x0000020FF9EB7990>\nlocator = ('css selector', 'div.content-page li:nth-child(3) div.w-100 div'), expected_text = 'Завершено'\n\n    @allure.step(\"Сравнение текста элемента с ожидаемым текстом\")\n    def compare_text(self, locator, expected_text):\n        try:\n            # Ожидание появления элемента и получение его текста\n            actual_text = WebDriverWait(self.driver, 30).until(EC.visibility_of_element_located(locator)).text\n    \n>           assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\nE           AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n\npages\\base_page.py:208: AssertionError","steps":[{"name":"Сравнение текста элемента с ожидаемым текстом","time":{"start":1747746812557,"stop":1747746813516,"duration":959},"status":"failed","statusMessage":"AssertionError: Текст не совпадает. Ожидаемый: Завершено, Фактический: Распечатка чека\n","statusTrace":"  File \"C:\\Users\\Stass\\PycharmProjects\\PycharmProjects\\tests_ui_karman\\venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\Stass\\karman_test\\pages\\base_page.py\", line 208, in compare_text\n    assert actual_text == expected_text, f\"Текст не совпадает. Ожидаемый: {expected_text}, Фактический: {actual_text}\"\n","steps":[],"attachments":[{"uid":"165551a2c91ede9a","name":"compare_text_mismatch_('css selector', 'div.content-page li:nth-child(3) div.w-100 div')","source":"165551a2c91ede9a.png","type":"image/png","size":128685},{"uid":"a455e78eb800f86a","name":"Сравнение текста","source":"a455e78eb800f86a.txt","type":"text/plain","size":114}],"parameters":[{"name":"locator","value":"('css selector', 'div.content-page li:nth-child(3) div.w-100 div')"},{"name":"expected_text","value":"'Завершено'"}],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":2}],"attachments":[{"uid":"159cb4a96e545303","name":"screenshot","source":"159cb4a96e545303.png","type":"image/png","size":124294},{"uid":"d9d4cf246463edb1","name":"screenshot","source":"d9d4cf246463edb1.png","type":"image/png","size":171834},{"uid":"545a166e5c51a59a","name":"screenshot","source":"545a166e5c51a59a.png","type":"image/png","size":208541},{"uid":"74f685238c54f753","name":"screenshot","source":"74f685238c54f753.png","type":"image/png","size":217956},{"uid":"228ed110c201494","name":"screenshot","source":"228ed110c201494.png","type":"image/png","size":286807},{"uid":"cd087255fa12af11","name":"screenshot","source":"cd087255fa12af11.png","type":"image/png","size":131871},{"uid":"9af41e77702fd2a0","name":"screenshot","source":"9af41e77702fd2a0.png","type":"image/png","size":130664},{"uid":"4e9d7fd6e9a40c8d","name":"screenshot","source":"4e9d7fd6e9a40c8d.png","type":"image/png","size":136572},{"uid":"6c2a5ae14aa64adb","name":"log","source":"6c2a5ae14aa64adb.txt","type":"text/plain","size":861}],"parameters":[],"stepsCount":1,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":11},"afterStages":[{"name":"driver::0","time":{"start":1747746813562,"stop":1747746816669,"duration":3107},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"play_sound_after_tests::0","time":{"start":1747747819534,"stop":1747747822003,"duration":2469},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"tag","value":"smoke('smoke test')"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_add_lead_contract_buy_back"},{"name":"host","value":"LAPTOP-R624DMFA"},{"name":"thread","value":"20192-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_add_lead_contract_buy_back"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"72f7a3fcf0c6a546","status":"passed","time":{"start":1747562362492,"stop":1747562526558,"duration":164066}},{"uid":"18cec18cb159e2c","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'click'","time":{"start":1747554936543,"stop":1747555041378,"duration":104835}},{"uid":"fe95f003c91c433","status":"passed","time":{"start":1747548964250,"stop":1747549109430,"duration":145180}},{"uid":"48725d4e02ca6874","status":"passed","time":{"start":1747310586705,"stop":1747310756276,"duration":169571}},{"uid":"7f320bf3e453d1ad","status":"broken","statusDetails":"_pytest.fixtures.FixtureLookupError: ('contract_сreate_page', <FixtureRequest for <Function test_create_old_lead_laptop_cash_contract_buy_back>>)","time":{"start":1747307941161,"stop":1747307941161,"duration":0}},{"uid":"8c6ee1c4cafae21e","status":"broken","statusDetails":"_pytest.fixtures.FixtureLookupError: ('contract_сreate_page', <FixtureRequest for <Function test_create_old_lead_laptop_cash_contract_buy_back>>)","time":{"start":1747295958685,"stop":1747295958685,"duration":0}},{"uid":"333c686bc9e99514","status":"broken","statusDetails":"_pytest.fixtures.FixtureLookupError: ('contract_сreate_page', <FixtureRequest for <Function test_create_old_lead_laptop_cash_contract_buy_back>>)","time":{"start":1747292101547,"stop":1747292101547,"duration":0}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke('smoke test')"]},"source":"3d8566926fd67916.json","parameterValues":[]}